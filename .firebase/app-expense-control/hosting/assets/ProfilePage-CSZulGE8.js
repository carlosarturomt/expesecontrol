import{r as s,U as M,n as X,j as e,S as L,o as G,d as j,c as v,e as N,p as Q}from"./index-WWc8y-UN.js";import{u as H}from"./useAuthRequired-Co0d41S0.js";import{x as C}from"./x_male_female_purple-CymKkZ1r.js";const J="/assets/female_hair_green-Bg6dJP7d.webp",V="/assets/female_rockstar-hIzQy--H.webp",Y="/assets/female_sunglasses_blondie-BxNSQ5Nq.webp",K="/assets/male_boy-DU9IE-Ih.webp",W="/assets/male_grandpa-CTFiY2Ib.webp",Z="/assets/male_sunglasses-zqt8rhwS.webp",ee="/assets/male_tshirt_red-BG33FSda.webp",te=[J,V,Y,K,W,Z,ee,C];function le(){var y,b;const{isLoading:w,isAuthenticated:T}=H("/register","/profile"),{loading:l,userAuth:i,userData:t}=s.useContext(M),[m,k]=s.useState(!l&&t&&t.expenseControl&&(t==null?void 0:t.expenseControl.budget)||""),[u,_]=s.useState(!l&&t&&t.expenseControl&&(t==null?void 0:t.expenseControl.currency)||"MXN"),[x,S]=s.useState(!l&&t&&t.expenseControl&&(t==null?void 0:t.expenseControl.cutoffDay)||"1"),[o,P]=s.useState(""),[r,h]=s.useState(""),[c,A]=s.useState(""),[d,U]=s.useState(""),[p,q]=s.useState((t==null?void 0:t.profilePhoto)||""),[g,ae]=s.useState(null),E=X(),I=()=>{G(Q).then(()=>{E("/"),console.log("Signed out successfully"),window.location.reload()}).catch(a=>{console.log("error")})},$=a=>{const n=a.target.value;P(n),n!=="other"&&h("")},f=a=>{h(a.target.value)},D=async()=>{if(i&&t){const a=j(v,"userData",i.username);try{await N(a,{profilePhoto:g||p}),console.log("Profile photo updated successfully"),setTimeout(()=>location.reload(),1e3)}catch(n){console.error("Error updating profile photo:",n)}}},F=async a=>{if(a.preventDefault(),D(),t&&t.expenseControl){const n=j(v,"userData",i.username),O={"expenseControl.budget":m,"expenseControl.currency":u,"expenseControl.cutoffDay":x,...o&&r?{[`paymentTypes.${o}`]:r}:{},...c&&d?{[`incomeControl.paymentTypes.${c}`]:d}:{}};try{await N(n,O),console.log("Updated successfully"),setTimeout(()=>location.reload(),1e3)}catch(z){console.error("Error updating budget, currency, and paymentTypes:",z)}}else console.error("userData or expenseControl is not available")},B=["card1","card2","card3","card4","card5"].filter(a=>!(t!=null&&t.paymentTypes&&t.paymentTypes[a])),R=["type1","type2","type3","type4","type5"].filter(a=>!(t!=null&&t.paymentTypes&&t.paymentTypes[a]));return w||l||!t?e.jsx(L,{bgTheme:!0}):T?e.jsxs("div",{children:[e.jsxs("section",{className:"w-full max-w-screen-sm mt-6 py-3 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx("img",{src:g||p||C,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border"}),e.jsxs("hgroup",{className:"",children:[e.jsx("h1",{className:"text-2xl font-bold leading-5 text-main-dark",children:(y=t==null?void 0:t.contactInf)==null?void 0:y.username}),e.jsx("p",{className:"text-sm text-main-primary",children:(b=t==null?void 0:t.contactInf)==null?void 0:b.email})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-main-dark font-semibold mt-4",children:"Actualizar foto de perfil"}),e.jsx("div",{className:"flex gap-4 mt-4 overflow-x-auto",children:te.map(a=>e.jsx("img",{src:a,alt:"Predefined Avatar",className:`w-16 h-16 rounded-full cursor-pointer border ${p===a?"border-main-primary":"border-gray-300"}`,onClick:()=>q(a)},a))})]})]}),e.jsxs("section",{className:"w-full max-w-screen-sm py-6",children:[e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"relative rounded-3xl py-2 px-4 mb-4 bg-main-dark/5",children:[e.jsx("label",{htmlFor:"budget",className:"absolute -top-2 text-sm font-medium rounded-full px-1 text-gray-700/50",children:"Presupuesto"}),e.jsxs("div",{className:"flex-center pt-2 py-2",children:["$",e.jsx("input",{name:"gasto",type:"number",placeholder:"$ $",value:m,onChange:a=>k(Number(a.target.value)),className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0}),!l&&t&&t.expenseControl&&(t==null?void 0:t.expenseControl.currency)]})]}),e.jsxs("div",{className:"relative rounded-3xl py-2 px-4 mb-4 bg-main-dark/5",children:[e.jsx("label",{htmlFor:"cutoffDay",className:"absolute -top-2 text-sm font-medium rounded-full px-1 text-gray-700/50",children:"Día de corte"}),e.jsx("div",{className:"flex-center pt-2 py-2",children:e.jsx("input",{name:"cutoffDay",type:"number",placeholder:"Define el día de corte. Ej: 1",value:x,onChange:a=>S(a.target.value),className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0})})]}),e.jsxs("div",{className:"relative rounded-3xl p-4 mb-4 bg-main-dark/5",children:[e.jsx("label",{htmlFor:"currency",className:"absolute -top-2 text-sm font-medium rounded-full px-1 text-gray-700/50",children:"Divisa"}),e.jsxs("select",{name:"currency",value:u,onChange:a=>_(a.target.value),className:"w-full bg-transparent outline-none",children:[e.jsx("option",{value:"MXN",children:"MXN"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]}),e.jsxs("div",{className:"relative rounded-3xl py-2 px-4 mb-4 bg-main-dark/5",children:[e.jsx("label",{htmlFor:"paymentTypes",className:"absolute -top-2 text-sm font-medium rounded-full px-1 text-gray-700/50",children:"Tipos de Pago (Control de Gastos)"}),e.jsxs("span",{className:"flex-center pt-2 py-2",children:[e.jsxs("select",{name:"currency",className:"w-1/3 bg-transparent outline-none",value:o,onChange:$,children:[e.jsx("option",{value:"",disabled:!0,children:"Dar de alta"}),B.map(a=>e.jsx("option",{value:a,children:`Tarjeta ${a.charAt(4)}`},a)),e.jsx("option",{value:"other",children:"Otro tipo de pago"})]}),o!==""&&o!=="other"&&e.jsx("input",{name:"gasto",type:"text",placeholder:"Ej: LikeU, AMEX, Débito",value:r,onChange:f,className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50"}),o==="other"&&e.jsx("input",{name:"gasto",type:"text",placeholder:"Especifica el tipo de pago",value:r,onChange:f,className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0})]}),e.jsx("span",{className:"text-main-dark/50",children:"Por defecto ya está habilitado el tipo de pago en efectivo, no es necesario que lo coloques."})]}),e.jsxs("div",{className:"relative rounded-3xl py-2 px-4 mb-4 bg-main-dark/5",children:[e.jsx("label",{htmlFor:"incomeTypes",className:"absolute -top-2 text-sm font-medium rounded-full px-1 text-gray-700/50",children:"Tipos de Ingreso"}),e.jsxs("span",{className:"flex-center pt-2 py-2",children:[e.jsxs("select",{name:"incomeTypes",className:"w-1/3 bg-transparent outline-none",value:c,onChange:a=>A(a.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Dar de alta"}),R.map(a=>e.jsx("option",{value:a,children:`Tipo de ingreso ${a.charAt(4)}`},a)),e.jsx("option",{value:"other",children:"Otro tipo de ingreso"})]}),c&&e.jsx("input",{name:"incomeCategory",type:"text",placeholder:"Ej: Transferencia, Cheque",value:d,onChange:a=>U(a.target.value),className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0})]}),e.jsx("span",{className:"text-main-dark/50",children:"Por defecto ya está habilitado el tipo de ingreso en efectivo, no es necesario que lo coloques."})]}),e.jsx("button",{type:"submit",className:"border rounded-3xl p-4 font-semibold text-main-dark hover:bg-main-highlight/10",children:"Actualizar"})]}),e.jsx("button",{onClick:I,className:"border rounded-3xl p-4 mt-4 mb-12 font-semibold text-main-dark hover:bg-main-highlight/10",children:"Cerrar Sesión"})]})]}):null}export{le as default};
