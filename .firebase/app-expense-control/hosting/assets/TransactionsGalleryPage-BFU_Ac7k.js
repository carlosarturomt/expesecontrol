import{r as i,U as b,j as e,S as u,I as m}from"./index-CGHjORu8.js";import{u as w}from"./useAuthRequired-EUxIKGY2.js";import{F as j}from"./Button-NgOye7x6.js";function E(){const{isLoading:f,isAuthenticated:x}=w("/register","/gallery"),{loading:y,userAuth:C,userData:N,state:r}=i.useContext(b),[L,h]=i.useState(0),[v,p]=i.useState([]),[a,d]=i.useState("");i.useEffect(()=>{const t=r.gastos.reduce((s,o)=>s+(parseFloat(o.gasto)||0),0);h(t)},[r.gastos]),i.useEffect(()=>(r.isModalOpen?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r.isModalOpen]);const c=r.gastos.filter(t=>t.fileURL&&(t.title.toLowerCase().includes(a.toLowerCase())||t.remarks.toLowerCase().includes(a.toLowerCase())||t.category.toLowerCase().includes(a.toLowerCase()))).sort((t,s)=>s.createdAt-t.createdAt),l=t=>{const s=t.target.value;s!==void 0&&d(s);let o=r.gastos;a&&(o=o.filter(n=>n.title.toLowerCase().includes(a.toLowerCase())||n.category.toLowerCase().includes(a.toLowerCase())||n.remarks.toLowerCase().includes(a.toLowerCase()))),s&&s!=="Todos"&&(o=o.filter(n=>n.category===s||s==="null"&&n.category==null)),p(o)},g=[{slug:l,label:"Todos",anchor:""},{slug:l,label:"Alimentación y Bebidas",anchor:"feeding"},{slug:l,label:"Transporte",anchor:"transportation"},{slug:l,label:"Salud y Bienestar",anchor:"health"},{slug:l,label:"Gastos de Educación o Trabajo",anchor:"educationJob"},{slug:l,label:"Vivienda",anchor:"housing"},{slug:l,label:"Entretenimiento y Ocio",anchor:"entertainment"},{slug:l,label:"Ropa y Cuidado Personal",anchor:"personalCare"}];return f?e.jsx(u,{bgTheme:!0}):x?e.jsxs("div",{children:[e.jsx("section",{className:"w-full max-w-screen-sm mt-6 py-3 flex flex-col items-center",children:e.jsx("p",{className:"text-main-dark/50",children:"Galería de Tickets"})}),e.jsx("section",{className:"relative py-2 mb-2 flex items-center",children:e.jsxs("div",{className:"w-full flex-center pl-4 rounded-3xl bg-main-dark/5",children:[e.jsx("i",{className:"flex-center w-6 h-6 opacity-40",children:m.search.border("#1C1C1E")}),e.jsx("input",{type:"text",placeholder:"Filtrar gastos...",value:a,onChange:t=>d(t.target.value),className:"w-full h-full pl-1 py-4 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0}),e.jsx(j,{label:e.jsx("i",{className:"flex-center w-6 h-6",children:m.filter.fill("#C2185B")}),items:g})]})}),e.jsxs("section",{className:"w-full max-w-screen-sm mb-20",children:[e.jsxs("hgroup",{className:"mb-4",children:[e.jsx("h2",{className:"text-main-dark py-2 text-lg font-semibold border-b border-main-dark/20",children:"Gastos"}),e.jsxs("p",{className:"py-2 text-sm font-light text-main-dark/50",children:[c.length," Resultados"]})]}),r.loading?e.jsx(u,{bgTheme:!0}):c.length>0?e.jsx("ul",{className:"w-full flex flex-wrap",children:c.sort((t,s)=>s.createdAt-t.createdAt).map(t=>e.jsx("picture",{className:"w-1/3 p-[1px] hover:w-full",children:e.jsx("img",{src:t.fileURL,alt:t.title,className:"w-full object-cover"})},t.id))}):e.jsx("li",{className:"flex justify-between items-center bg-main-dark/5 rounded-3xl p-4",children:e.jsx("span",{className:"text-main-dark font-medium",children:"No hay tickets de gastos registrados"})})]})]}):null}export{E as default};
