import{r as n,U as j,j as t,S as m,I as f}from"./index-DNCbP-Re.js";import{u as C}from"./useAuthRequired-BbmIkX98.js";import{F as N}from"./Button-DbXfT4Da.js";function F(){const{isLoading:x,isAuthenticated:h}=C("/register","/gallery"),{loading:L,userAuth:k,userData:v,state:r}=n.useContext(j),[T,g]=n.useState(0),[A,p]=n.useState([]),[s,d]=n.useState(""),[u,b]=n.useState(null);n.useEffect(()=>{const e=r.gastos.reduce((l,o)=>l+(parseFloat(o.gasto)||0),0);g(e)},[r.gastos]),n.useEffect(()=>(r.isModalOpen?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r.isModalOpen]);const c=r.gastos.filter(e=>e.image&&e.image.imageURL||e.fileURL&&(e.title.toLowerCase().includes(s.toLowerCase())||e.remarks.toLowerCase().includes(s.toLowerCase())||e.category.toLowerCase().includes(s.toLowerCase()))).sort((e,l)=>l.createdAt-e.createdAt),a=e=>{const l=e.target.value;l!==void 0&&d(l);let o=r.gastos;s&&(o=o.filter(i=>i.title.toLowerCase().includes(s.toLowerCase())||i.category.toLowerCase().includes(s.toLowerCase())||i.remarks.toLowerCase().includes(s.toLowerCase()))),l&&l!=="Todos"&&(o=o.filter(i=>i.category===l||l==="null"&&i.category==null)),p(o)},w=[{slug:a,label:"Todos",anchor:""},{slug:a,label:"Alimentación y Bebidas",anchor:"feeding"},{slug:a,label:"Transporte",anchor:"transportation"},{slug:a,label:"Salud y Bienestar",anchor:"health"},{slug:a,label:"Gastos de Educación o Trabajo",anchor:"educationJob"},{slug:a,label:"Vivienda",anchor:"housing"},{slug:a,label:"Entretenimiento y Ocio",anchor:"entertainment"},{slug:a,label:"Ropa y Cuidado Personal",anchor:"personalCare"}],y=e=>{b(l=>l===e?null:e)};return x?t.jsx(m,{bgTheme:!0}):h?t.jsxs("div",{children:[t.jsx("section",{className:"w-full max-w-screen-sm mt-6 py-3 flex flex-col items-center",children:t.jsx("p",{className:"text-main-dark/50",children:"Galería de Tickets"})}),t.jsx("section",{className:"relative py-2 mb-2 flex items-center",children:t.jsxs("div",{className:"w-full flex-center pl-4 rounded-3xl bg-main-dark/5",children:[t.jsx("i",{className:"flex-center w-6 h-6 opacity-40",children:f.search.border("#1C1C1E")}),t.jsx("input",{type:"text",placeholder:"Filtrar gastos...",value:s,onChange:e=>d(e.target.value),className:"w-full h-full pl-1 py-4 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0}),t.jsx(N,{label:t.jsx("i",{className:"flex-center w-6 h-6",children:f.filter.fill("#C2185B")}),items:w})]})}),t.jsxs("section",{className:"w-full max-w-screen-sm mb-20",children:[t.jsxs("hgroup",{className:"mb-4",children:[t.jsx("h2",{className:"text-main-dark py-2 text-lg font-semibold border-b border-main-dark/20",children:"Tickets de Gastos"}),t.jsxs("p",{className:"py-2 text-sm font-light text-main-dark/50",children:[c.length," Resultados"]})]}),r.loading?t.jsx(m,{bgTheme:!0}):c.length>0?t.jsx("ul",{className:"w-full flex flex-wrap",children:c.sort((e,l)=>l.createdAt-e.createdAt).map(e=>t.jsx("picture",{className:`${u===e.id?"w-full md:w-[72.666%]":"w-1/3 md:w-[24%]"} flex flex-col rounded-lg cursor-pointer transition-all duration-500 ease-in-out p-[1px]`,onClick:()=>y(e.id),children:t.jsx("img",{src:e.image&&e.image.imageURL||e.fileURL,alt:e.title,loading:"lazy",className:`object-cover w-full h-full md:min-h-[200px] rounded-lg blurred-img bg-neutral-250 dark:bg-[#000e2c] ${u===e.id?"scale-110":""}`})},e.id))}):t.jsx("li",{className:"flex justify-between items-center bg-main-dark/5 rounded-3xl p-4",children:t.jsx("span",{className:"text-main-dark font-medium",children:"No hay tickets de gastos registrados"})})]})]}):null}export{F as default};
