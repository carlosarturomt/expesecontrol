import{r as a,U as y,j as e,S as k,I as f,a as v,s as F,u as S,g as $,b as C,d as G,c as A}from"./index-CAIagtez.js";import{u as R}from"./useAuthRequired-CR4dpuxI.js";function M(){const{isLoading:b,isAuthenticated:j}=R("/register","/"),[g,r]=a.useState(!1),[i,m]=a.useState(""),[d,c]=a.useState(""),[l,o]=a.useState(null),[x,u]=a.useState(!1),{userAuth:t}=a.useContext(y);console.log(t.username);const N=()=>r(!0),p=()=>r(!1),w=async s=>{s.preventDefault(),u(!0);try{let n="";if(l){const h=v(F,`userFiles/${t.username}/${l.name}`);await S(h,l),n=await $(h)}await C(G(A,"userPosts",t.username),{gasto:i,texto:d,fileURL:n,user:t.username,createdAt:new Date}),m(""),c(""),o(null),p()}catch(n){console.error("Error al subir datos: ",n)}finally{u(!1)}};return b?e.jsx(k,{bgTheme:!0}):j?e.jsxs("div",{children:[e.jsxs("section",{className:"w-full max-w-screen-sm mt-6 py-3 flex flex-col items-center",children:[e.jsx("p",{className:"text-main-dark/50",children:"Gastos Totales"}),e.jsx("h1",{className:"text-4xl font-bold text-main-dark my-2",children:"$17,505.00"}),e.jsx("p",{className:"text-main-primary",children:"-$7,000.00"})]}),e.jsxs("section",{className:"w-full max-w-screen-sm flex justify-between items-center gap-2 py-3 px-6",children:[e.jsxs("button",{onClick:N,className:"w-1/2 flex-center gap-1 text-sm font-semibold bg-main-highlight/70 text-white rounded-3xl p-3 transition-colors duration-200 hover:bg-main-primary-dark",children:[e.jsx("i",{className:"flex-center w-6 h-6 rounded-full hover:scale-105",children:f.plus.fill("#FFFFFF")}),"Agregar"]}),e.jsxs("button",{className:"w-1/2 flex-center gap-1 text-sm font-semibold bg-main-dark/70 text-white rounded-3xl p-3 transition-colors duration-200 hover:bg-main-primary-dark",children:[e.jsx("i",{className:"flex-center w-6 h-6 rounded-full hover:scale-105",children:f.subtract.fill("#FFFFFF")}),"Retirar"]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full relative",children:[e.jsx("button",{onClick:p,className:"absolute top-3 right-3 text-main-dark text-2xl",children:"×"}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Agregar Gasto"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx("input",{type:"number",placeholder:"Gasto",value:i,onChange:s=>m(s.target.value),className:"w-full p-2 border border-gray-300 rounded",required:!0}),e.jsx("textarea",{placeholder:"Descripción",value:d,onChange:s=>c(s.target.value),className:"w-full p-2 border border-gray-300 rounded",required:!0}),e.jsx("input",{type:"file",onChange:s=>o(s.target.files[0]),className:"w-full p-2",accept:"image/*, .pdf"}),e.jsx("button",{type:"submit",disabled:x,className:"w-full p-2 bg-main-highlight text-white rounded hover:bg-main-primary-dark transition",children:x?"Guardando...":"Guardar"})]})]})}),e.jsxs("section",{className:"w-full max-w-screen-sm py-3",children:[e.jsx("h2",{className:"text-dark text-lg font-semibold mb-4",children:"Notificaciones"}),e.jsx("div",{className:"bg-main-warning rounded-3xl p-4",children:e.jsx("p",{className:"text-dark font-medium",children:"¡Alerta! Has superado tu presupuesto mensual en un 75.05%."})})]}),e.jsxs("section",{className:"w-full max-w-screen-sm py-3",children:[e.jsx("h2",{className:"text-main-dark text-lg font-semibold mb-4",children:"Resumen Mensual"}),e.jsxs("div",{className:"bg-main-dark/5 rounded-3xl p-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-main-dark",children:"Presupuesto"}),e.jsx("span",{className:"text-main-dark font-semibold",children:"$10,000.00"})]}),e.jsxs("div",{className:"bg-main-dark/5 rounded-3xl p-4 flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-main-dark",children:"Gastos Totales"}),e.jsx("span",{className:"text-main-dark font-semibold",children:"-$17,505.00"})]}),e.jsxs("div",{className:"bg-main-primary/20 rounded-3xl p-4 flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-main-primary font-semibold",children:"Exceso"}),e.jsx("span",{className:"text-main-primary font-semibold",children:"- $7,505.00 (75.05%)"})]})]}),e.jsxs("section",{className:"w-full max-w-screen-sm py-3 mb-20",children:[e.jsx("h2",{className:"text-main-dark text-lg font-semibold mb-4",children:"Últimos Gastos"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex justify-between items-center bg-main-dark/5 rounded-3xl p-4",children:[e.jsx("span",{className:"text-main-dark font-medium",children:"Comida"}),e.jsx("span",{className:"text-main-primary font-semibold",children:"-$500.00"})]}),e.jsxs("li",{className:"flex justify-between items-center bg-main-dark/5 rounded-3xl p-4",children:[e.jsx("span",{className:"text-main-dark font-medium",children:"Transporte"}),e.jsx("span",{className:"text-main-primary font-semibold",children:"-$300.00"})]}),e.jsxs("li",{className:"flex justify-between items-center bg-main-dark/5 rounded-3xl p-4",children:[e.jsx("span",{className:"text-main-dark font-medium",children:"Entretenimiento"}),e.jsx("span",{className:"text-main-primary font-semibold",children:"-$150.00"})]})]})]})]}):null}export{M as default};
