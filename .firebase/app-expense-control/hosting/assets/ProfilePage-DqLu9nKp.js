import{r,U as p,k as g,j as e,S as f,l as h,d as b,a as j,f as N,m as y}from"./index-BLiLwPlx.js";import{u as k}from"./useAuthRequired-DYskdnzX.js";function B(){const{isLoading:n,isAuthenticated:o}=k("/register","/profile"),{userAuth:l,userData:t}=r.useContext(p),[a,c]=r.useState((t==null?void 0:t.budget)||0),d=g(),u=()=>{h(y).then(()=>{d("/"),console.log("Signed out successfully"),window.location.reload()}).catch(s=>{console.log("error")})},i=async s=>{if(s.preventDefault(),t){const m=b(j,"userData",l.username);try{await N(m,{budget:a}),console.log("Budget updated successfully")}catch(x){console.error("Error updating budget:",x)}}};return n?e.jsx(f,{bgTheme:!0}):o?e.jsxs("div",{children:[e.jsxs("section",{className:"w-full max-w-screen-sm mt-6 py-3 flex flex-col items-center",children:[e.jsx("p",{className:"text-main-dark/50",children:"Profile"}),e.jsx("h1",{className:"text-4xl font-bold text-main-dark my-2",children:t&&t.contactInf.username}),e.jsx("p",{className:"text-main-primary",children:t&&t.contactInf.email})]}),e.jsxs("section",{className:"w-full max-w-screen-sm py-6",children:[e.jsxs("form",{onSubmit:i,children:[e.jsx("label",{htmlFor:"budget",className:"block mb-2 text-sm font-medium text-gray-700",children:"Budget"}),e.jsx("hgroup",{className:"rounded-3xl py-2 px-4 mb-4 bg-main-dark/5 ",children:e.jsxs("div",{className:"flex-center pt-2 py-2",children:["$",e.jsx("input",{name:"gasto",type:"number",placeholder:"$ $",value:a,onChange:s=>c(Number(s.target.value)),className:"w-full pl-1 bg-transparent outline-none text-main-dark placeholder:text-main-dark/50",required:!0}),"MXN"]})}),e.jsx("button",{type:"submit",className:"border rounded-3xl p-4 font-semibold text-main-dark",children:"Update Budget"})]}),e.jsx("button",{onClick:u,className:"border rounded-3xl p-4 font-semibold text-main-dark mt-4",children:"Log out"})]})]}):null}export{B as default};
